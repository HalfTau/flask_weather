<head>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles.css') }}">

    <title>Flask Weather</title>

<script>
function toggleDiv(divId, linkId) {
  const div = document.getElementById(divId);
  const link = document.getElementById(linkId);

  if (div.style.display === 'block') {
    div.style.display = 'none';
    link.textContent = 'Show Hours';
  } else {
    div.style.display = 'block';
    link.textContent = 'Hide Hours';
  }
}
</script>

</head>
<body>
    <form method="POST" action="/">
        <input name="text" placeholder="Enter city name">
        <input type="submit" value="Search">
    </form>

    <form method="POST" action="/result">
            {% if not results %}
                <p>Select a location:</p>
            {%endif%}
            <h1>{{ results['name'] }}, {{results['state']}}, {{ results['country'] }}</h1>

            <p>Temperature: {{ results['temperature_f'] }}°F</p>
            <p>Feels like: {{ results['feels_like_f'] }}°F</p>
            <p>Humidity: {{ results['humidity'] }}%</p>
            <p>Weather: {{ results['description'] }}</p>
            <img src="http://openweathermap.org/img/wn/{{ results['icon'] }}@2x.png" alt="Weather icon">
            <h2>Weekly Forecast:</h2>
            <div class="forecast-container">
            {% for day in forecast %}
            <div class="forecast-day">
                <h3>{{ day.date }}</h3>
                <p>Day: {{ day.temp_day }}°F, Night: {{ day.temp_night }}°F</p>
                <p>{{ day.description }}</p>
                <img src="https://openweathermap.org/img/wn/{{ day.icon }}@2x.png">
                <!--building a div for each hour available. Gives each div a unique ID based on 
                the index of the loop.-->
                {% if day.hours %}
                <div id="hour_div_{{ loop.index }}" style="display: none;">
                    {% for hour in day.hours %}
                    <p>{{ hour.time }}: {{ hour.temp }}°F
                    <img src="https://openweathermap.org/img/wn/{{ hour.icon }}@2x.png"></p>
                    {% endfor %}
                </div>
                <!--building what gets sent back to toggleDiv. The unique ID of the div as well as the ID for the link. This lets toggleDiv to toggle both the hourly div as well as the link-->
                <a href="javascript:toggleDiv('hour_div_{{ loop.index }}', 'toggle_link_{{ loop.index }}');" id="toggle_link_{{ loop.index }}">Show Hours</a>
                {% endif %}
            </div>
            {% endfor %}

            </div>

        </div>

        <div class="hourly">

        </div>

</body>